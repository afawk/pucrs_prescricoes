!function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=document.createElement("style");e.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(e)}}(),popSelect=function(e,t){$(e).empty(),0==t.length&&$(e).append($("<option>").text("--- Nenhum item encontrado ---").attr("value","0")),$.each(t,function(t,a){$(e).append($("<option>").text(a.name).attr("value",a.id))})},createHiddenInput=function(e,t,a,n){var i=$("<input>").attr("type","hidden").attr("name",t).attr("value",a);void 0!=n&&i.attr("id",n),e.append(i)},$("a[rel='searchable']").on("click",function(e){e.preventDefault();var t=$(this).data("search"),a=$("#"+t),n=$("#add_"+t);n.addClass("btn-primary").removeClass("btn-danger").prop("disabled",!0).text("Carregando..."),$.getJSON("/searchable",{item:t,search:a.val()}).done(function(e){$("#"+t+"_form").show(),popSelect("#apresentacao_"+t,e.apresentacao),popSelect("#frequencia_"+t,e.frequencia),popSelect("#via_"+t,e.via),$("#medicamento_id").remove(),createHiddenInput(a.parent(),"medicamento_id",e.medicamento_id,"medicamento_id"),n.prop("disabled",!1).text("Adicionar")}).fail(function(e){$("#"+t+"_form").hide(),alert("Medicamento não encontrado, tente novamente")})}),$("#medicamento_form,#aplicacao_form").on("submit",function(e){e.preventDefault();var t=$("#medicamento_id").val(),a=$("#medicamento").val(),n=["elemento","apresentacao","frequencia","via","quantidade","condicao"];$.each($(this).serializeArray(),function(e,a){var i=a.name;n.indexOf(i)>=0&&(i+="["+t+"]"),createHiddenInput($(".form-prescricao"),i,a.value)});var i=$("#selectedList");i.show(),i.append($("<p>").html('<a href="#"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a> <strong>'+a+"</strong>: apresentação "+$("#apresentacao_medicamento :selected").text()+", frequência "+$("#frequencia_medicamento :selected").text()+", via "+$("#via_medicamento :selected").text()+", quantidade "+$("#quantidade_medicamento").val())),$(this).find("select, input[type=text]").empty().val(""),$(this).hide()}),$("#selectedList").on("click","p > a",function(e){e.preventDefault(),$(this).parent().remove();var t=$("#selectedList"),a=!$.trim(t.html());a&&t.hide()});