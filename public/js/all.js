!function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=document.createElement("style");e.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(e)}}(),alert(1),popSelect=function(e,a){$(e).empty(),0==a.length&&$(e).append($("<option>").text("--- Nenhum item encontrado ---").attr("value","0")),$.each(a,function(a,t){$(e).append($("<option>").text(t.name).attr("value",t.id))})},createHiddenInput=function(e,a,t,n){var i=$("<input>").attr("type","hidden").attr("name",a).attr("value",t);void 0!=n&&i.attr("id",n),e.append(i)},$("a[rel='searchable']").on("click",function(e){e.preventDefault();var a=$(this).data("search"),t=$("#"+a),n=$("#add_"+a);$("#"+a+"_form").show(),n.addClass("btn-primary").removeClass("btn-danger").prop("disabled",!0).text("Carregando..."),$.getJSON("/searchable",{item:a,search:t.val()}).done(function(e){popSelect("#apresentacao_"+a,e.apresentacao),popSelect("#frequencia_"+a,e.frequencia),popSelect("#via_"+a,e.via),$("#medicamento_id").remove(),createHiddenInput(t.parent(),"medicamento_id",e.medicamento_id,"medicamento_id"),n.prop("disabled",!1).text("Adicionar")}).fail(function(e){n.removeClass("btn-primary").addClass("btn-danger").text("Tente novamente")})}),$("#medicamento_form,#aplicacao_form").on("submit",function(e){e.preventDefault();var a=$("#medicamento_id").val(),t=$("#medicamento").val(),n=["elemento","apresentacao","frequencia","via","quantidade","condicao"];$.each($(this).serializeArray(),function(e,t){var i=t.name;n.indexOf(i)>=0&&(i+="["+a+"]"),createHiddenInput($(".form-prescricao"),i,t.value)});var i=$("#selectedList");i.show(),i.append($("<p>").html('<a href="#"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a> <strong>'+t+"</strong>: apresentação "+$("#apresentacao_medicamento :selected").text()+", frequência "+$("#frequencia_medicamento :selected").text()+", via "+$("#via_medicamento :selected").text()+", quantidade "+$("#quantidade_medicamento").val()))}),$("#selectedList").on("click","p > a",function(e){e.preventDefault(),$(this).parent().remove();var a=$("#selectedList"),t=!$.trim(a.html());t&&a.hide()});